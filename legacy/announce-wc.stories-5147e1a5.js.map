{"version":3,"file":"announce-wc.stories-5147e1a5.js","sources":["../../src/announce/announce-wc.stories.mdx"],"sourcesContent":["import { Story, Preview, Meta, Props, html, withKnobs, withWebComponentsKnobs } from '@open-wc/demoing-storybook';\nimport './bulib-announce.js';\n\n<Meta \n  title=\"Web Components|bulib-announce\"\n  decorators={[withKnobs, withWebComponentsKnobs]}\n  parameters={{\n    component: \"bulib-announce\",\n    options: { selectedPanel: \"storybookjs/knobs/panel\" },\n  }}\n/>\n\n# Announcement Banner Component\n\nUsed to show site-wide, time-sensitive, dismissable chunk of information with varying severity, a prominent message, \n  and a clear call to action.\n\n\n## Usages \n\n### Default Component\n\nby default, `bulib-announce` displays with a default message with an `info`-level severity and no call to action\n\n<Preview withToolbar>\n  <Story name=\"basic\">\n    {html`<bulib-announce debug></bulib-announce>`}\n  </Story>\n</Preview>\n\n\n### Custom Message and Severity\n\nSpecifying a `severity` will alter its color and icon, and should be complimentary to the specified `message`.\n\n<Preview withToolbar>\n  <Story name=\"custom-severity\">\n    {html`\n      <bulib-announce debug code=\"severity-info\" severity=\"info\" message=\"Situation-independent information\"></bulib-announce>\n      <hr />\n      <bulib-announce debug code=\"severity-success\" severity=\"success\" message=\"A user action has been completed or verified\"></bulib-announce>\n      <hr />\n      <bulib-announce debug code=\"severity-warn\" severity=\"warn\" message=\"Something is wrong, but it's not an emergency\"></bulib-announce>\n      <hr />\n      <bulib-announce debug code=\"severity-alert\" severity=\"alert\" message=\"Something is very wrong and needs immediate attention\"></bulib-announce>\n    `}\n  </Story>\n</Preview>\n\n\n### Custom Calls-to-Actions\n\nYou can also specify a call-to-action text (`cta_text`) and url (`cta_url`). \n\n<Preview withToolbar>\n  <Story name=\"custom-signin-cta\">\n    {html`\n      <bulib-announce debug code=\"signin-cta\" severity=\"info\" message=\"Sign in to view 'My Favorites'\" \n        cta_text=\"Sign In\" cta_url=\"https://www.bu.edu/library/account/\"></bulib-announce>\n    `}\n  </Story>\n</Preview>\n\n\n### Banner Dismissal\n\nIn order to not annoy the user (by presenting them with irrelevant or unwanted information), banner \n  messages can be hidden by being dismissed (by setting them to `disabled`).\n\n\n#### Manual Override\n\nFor debugging purposes, this can be done manually - in which case it will _always_ be hidden (`dismissed=\"true\"`, `dismissed`) \n  or _always_ shown (`dismissed=\"false\"`) regardless of what's been saved in the local storage.\n\n<Preview withToolbar>\n  <Story name=\"dismissed-manual-override\">\n    {html`\n      <bulib-announce debug code=\"dismissed-present\" dismissed message=\"'dismissed' is present, but unspecified\"></bulib-announce> <hr />\n      <bulib-announce debug code=\"dismissed-true\" dismissed=\"true\" message=\"'dismissed' is present and set to 'true'\"></bulib-announce> <hr />\n      <bulib-announce debug code=\"dismissed-false\" dismissed=\"false\" message=\"'dismissed' is present and set to 'false'\"></bulib-announce>\n    `}\n  </Story>\n</Preview>\n\n_NOTE: clicking the DISMISS button will immediately toggle the `dismiss` value for the banner, save that value in local storage, and switch that banner's dismissal to manual mode until page is reloaded_\n\n\n#### Looking at Session Memory (default)\n\nBy default, we try to remember a user's decision to dismiss a banner for one week (seven days). \n\n_NOTE: We 'remember' the user's decision by using the `src/_helpers/storageUtility` which reads from `localStorage`_ \n\n<Preview withToolbar>\n  <Story name=\"dismissed-memory\">\n    {html`\n      <bulib-announce debug severity=\"info\" code=\"one\" message=\"one\"></bulib-announce> <hr />\n      <bulib-announce debug severity=\"warn\" code=\"two\" message=\"two\"></bulib-announce> <hr />\n      <bulib-announce debug severity=\"alert\" code=\"three\" message=\"three\"></bulib-announce> <hr />\n      <bulib-announce debug severity=\"success\" code=\"four\" message=\"four\"></bulib-announce>\n    `}\n  </Story>\n</Preview>\n\n\n### Getting Data from the Google Sheets API \n\nOften for emergency, convenience, inclusivity of authorship, etc., we want to have an announce-banner without \n  having to add any additional `html` to our sites. \n\n\n#### Looking at the Default Code\n\nTo do this, we add a `<bulib-announce>` tag with a particular `code`, referring to an entry in our \n  ['announcment-banner' spreadsheet](https://docs.google.com/spreadsheets/d/1ElW0CUOV3LvcHuYxK2BZfFjo65a-XDrlNJtnrelA6tM/edit#gid=0).\n  This tag sits then asks that spreadsheet for what it should contain every time the page loads, but only shows itself to the user\n  when the `show_banner` is checked _and_ they haven't dismissed it. \n\nWe'll use the `testing` code for this example, since we normally leave that one selected.\n\nYou can see in the example below that when the API variable is set, but the user has already dismissed the banner \n  within the default expiration, it's still hidden.\n\n<Preview withToolbar>\n  <Story name=\"sheets-api-default\">\n    {html`\n      <table>\n        <tr>\n          <td>debug</td>\n          <td><bulib-announce code=\"testing\" message=\"this will be replaced\" debug dismissed></bulib-announce></td>\n        </tr>\n        <tr>\n          <td>no debug</td>\n          <td><bulib-announce code=\"testing\" message=\"this will be replaced\" dismissed></bulib-announce></td>\n        </tr>\n      </table>\n    `}\n  </Story>\n</Preview>\n\n\n#### Existing Platform Codes\n\nBy convention, we do this for each of our bigger platforms; adding one of the following tags with it's specified `code` \n  just below the header, and letting it wait for when it should be shown. \n  \nIf we wanted to add an announce-banner to the [Database List](https://library.bu.edu/az.php), for example, we'd look\n  for the that entry in the google spreadsheet (`libguides-db` in this case), and add the following code to the \n  header for that platform.\n\n```html\n<bulib-announce code=\"libguides-db\"></bulib-announce>\n``` \n\nWe'd then see any of the edits we made in the spreadsheet reflected on every page of that \n  platform (when `show_banner` is checked or we have `debug` attribute on).\n\nBelow are all the `code`s that we have pre-prepared for this purpose: \n\n<Preview withToolbar>\n  <Story name=\"sheets-api-enumerated\">\n    {html`\n      <table>\n        <thead>\n          <th>code</th><th>banner</th>\n        </thead>\n        <tbody>\n          <tr><td>primo-BU</td><td><bulib-announce debug dismissed code=\"primo-BU\"></bulib-announce></td></tr>\n          <tr><td>primo</td><td><bulib-announce debug dismissed code=\"primo\"></bulib-announce></td></tr>\n          <tr><td>primo-BULAW</td><td><bulib-announce debug dismissed code=\"primo-BULAW\"></bulib-announce></td></tr>\n          <tr><td>primo-ISL</td><td><bulib-announce debug dismissed code=\"primo-ISL\"></bulib-announce></td></tr>\n          <tr><td>primo-test</td><td><bulib-announce debug dismissed code=\"primo-test\"></bulib-announce></td></tr>\n          <tr><td>testing</td><td><bulib-announce debug dismissed code=\"testing\"></bulib-announce></td></tr>\n          <tr><td>wordpress</td><td><bulib-announce debug dismissed code=\"wordpress\"></bulib-announce></td></tr>\n          <tr><td>libguides</td><td><bulib-announce debug dismissed code=\"libguides\"></bulib-announce></td></tr>\n          <tr><td>libcal</td><td><bulib-announce debug dismissed code=\"libcal\"></bulib-announce></td></tr>\n          <tr><td>libanswers</td><td><bulib-announce debug dismissed code=\"libanswers\"></bulib-announce></td></tr>\n          <tr><td>libanswers-business</td><td><bulib-announce debug dismissed code=\"libanswers-business\"></bulib-announce></td></tr>\n          <tr><td>libanswers-spring2020</td><td><bulib-announce debug dismissed code=\"libanswers-spring2020\"></bulib-announce></td></tr>\n          <tr><td>all</td><td><bulib-announce debug dismissed code=\"all\"></bulib-announce></td></tr>\n        </tbody>\n      </table>\n    `}\n  </Story>\n</Preview>\n\n\n#### Preventing/Disabling the API Call Lookup (debugging)\n\nYou can use the `prevent_action` to stop the call to the Sheets API.\n\n<Preview withToolbar>\n  <Story name=\"sheets-api-prevented\">\n    {html`\n      <table>\n        <tr>\n          <td>debug</td>\n          <td><bulib-announce debug code=\"testing\" message=\"api call prevented by 'prevent_action'\" prevent_action></bulib-announce></td>\n        </tr>\n        <tr>\n          <td>no debug</td>\n          <td><bulib-announce code=\"testing\"  message=\"api call prevented by 'prevent_action'\" prevent_action></bulib-announce></td>\n        </tr>\n      </table>\n    `}\n  </Story>\n</Preview>\n\n## API - Properties \n\n<Props of=\"bulib-announce\" />\n\n"],"names":["layoutProps","MDXLayout","MDXContent","components","props","mdx","mdxType","Meta","title","decorators","withKnobs","withWebComponentsKnobs","parameters","component","options","selectedPanel","parentName","Preview","withToolbar","Story","name","html","Props","of","isMDXComponent","basic","makeStoryFn","story","mdxSource","customSeverity","customSigninCta","dismissedManualOverride","dismissedMemory","sheetsApiDefault","sheetsApiEnumerated","sheetsApiPrevented","componentMeta","includeStories","mdxStoryNameToId","docs","page","AddContext"],"mappings":"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"}