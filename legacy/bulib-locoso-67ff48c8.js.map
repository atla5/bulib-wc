{"version":3,"file":"bulib-locoso-67ff48c8.js","sources":["../../src/locoso/locoso.js","../../src/locoso/bulib-locoso.js"],"sourcesContent":["import {LitElement, html} from 'lit-element/lit-element';\nimport {getLibraryInfoFromCode} from '../_helpers/lib_info_helper.js';\n\nimport {sendGAEvent} from '../_helpers/google_analytix';\n\nconst ALLOW_HOURS_DISPLAY = true;\n\n/**\n * display the *LO*cation, *CO*ntact, and *SO*cial media information for\n *    a given library within the Boston Universities System.\n */\nexport default class Locoso extends LitElement {\n\n  static get properties() {\n    return {\n      /** optional additional class added to each link in the rendered HTML */\n      link_class: {type: String},\n      /** current library code used as the key to swap between locoso data entries */\n      library: {type: String, notify:true},\n      \n      /** [debugging] log events to console */\n      debug: {type: Boolean}\n    };\n  }\n\n  render() {\n    let myLocoso = getLibraryInfoFromCode(this.library) || {};\n    this._logToConsole(\"raw lib_data from lib_info_helper: \\n\" + JSON.stringify(myLocoso));\n\n    let lib_name = myLocoso[\"name\"] || \"BU Libraries\";\n    let address = myLocoso[\"address\"] || [\"771 Commonwealth Avenue\",\"Boston, MA 02215\"];\n    let website = myLocoso[\"website\"] || \"https://www.bu.edu/library/about\";\n\n    let raw_contacts = myLocoso[\"contacts\"] || {\"phone\":\"617-353-2700\",\"email\":\"ask@bu.edu\",\"text\":\"617-431-2427\"};\n    let contacts = this._prepareContacts(raw_contacts);\n    \n    let raw_social = myLocoso[\"social\"] || {};\n    let social = this._prepareSocial(raw_social);\n    \n    let include_libhours = ALLOW_HOURS_DISPLAY && this.library && this.library != \"help\";\n    this._logToConsole(\"lib_name: \" + lib_name + \", include_libhours: \" + include_libhours);\n    \n    let socialDisplay;\n    if(social.length < 1){ socialDisplay = html``; }\n    else{\n      socialDisplay= html`\n        <h3>Follow Us</h3>\n        <ul aria-description=\"list of social media accounts\" class=\"no-bullet inline-list plm\">\n        ${social.map((s) =>\n          html`<li><a title=\"${s.text}\" class=\"${this.link_class}\" @click=\"${(ev) => {this._logGAEvent(s.text);}}\" \n                      href=\"${s.url}\" target=\"_blank\"><img alt=\"${s.text} icon\" class=\"sm-icon ${this.link_class}\"\n                      src=\"https://cdn.jsdelivr.net/npm/bulib-wc@latest/dist/icons/icons8-${s.text}-48.png\"></a></li>`\n        )}\n        </ul>\n      `;\n    }\n    \n    return html`\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/bulib-wc@latest/dist/bundle.css\">\n      <style>\n        /* layout and responsiveness */\n        .locoso-left { flex: 1; }\n        .locoso-wrapper { display: flex; }\n\n        /* list styles, */\n        .locoso-left ul, .locoso-left ol { margin: 5px 0px; padding-left: 0; padding-bottom: 10px; }\n\n        /* padding and margins */\n        .prm { margin-right: 10px; padding-right: 10px; }\n        .sm-icon { width: 30px; height: 30px; border: solid transparent 1px; }\n        .sm-icon:hover { width: 30px; height: 30px; border: solid white 1px; }\n      </style>\n      <div class=\"locoso-wrapper\">\n        <div class=\"locoso-left\">\n          <div class=\"txtv\">\n            <h3 class=\"inline\">Visit Us</h3>&nbsp;\n            ${include_libhours \n              ? html`-&nbsp;<bulib-hours class=\"inline\" link_class=\"${this.link_class}\" library=\"${this.library}\" short></bulib-hours>` \n              : html``\n            }\n          </div>\n          <ol class=\"no-bullet\" aria-label=\"address\">\n            <li>${lib_name}</li>\n            ${address.map((l) => html`<li>${l}</li>`)}\n            <li>\n              <small>\n                <a title=\"${lib_name} website\" class=\"${this.link_class}\" @click=\"${(ev) => {this._logGAEvent('website');}}\"\n                   aria-label=\"Open library site\" href=\"${website}\">website</a>\n                <a title=\"get directions\" class=\"${this.link_class}\" @click=\"${(ev) => {this._logGAEvent('directions');}}\"\n                   aria-label=\"Directions to the Library\" href=\"${'https://google.com/maps/search/' + encodeURI(\"Boston University \" + lib_name)}\" \n                   target=\"_blank\">directions &raquo;</a>\n              </small>\n            </li>\n          </ol>\n        </div>\n        <div class=\"locoso-right\">\n          <h3 class=\"inline\">Contact Us</h3>\n          <ul class=\"no-bullet\" aria-label=\"contact-links\">\n            ${contacts.map((c) => html`\n              <li>${c.text} <a class=\"${this.link_class}\" href=\"${c.url}\" \n                               @click=\"${(ev) => {this._logGAEvent(c.text);}}\">${c.val}</a>\n              </li>`\n             )}\n          </ul>\n          ${socialDisplay}\n        </div>\n      </div>\n    `;\n  }\n\n  /** use the raw 'contacts' data to populate a basic list that can more easily displayed as a list of links */\n  _prepareContacts(rawContacts){\n    if(Object.keys(rawContacts).length < 1){ return {}; }\n    \n    let contacts = [];\n    if(rawContacts[\"phone\"]){\n      contacts.push( {\"text\":\"call\", \"url\":\"tel:\"+rawContacts[\"phone\"], \"val\":rawContacts[\"phone\"]} );\n    }\n    if(rawContacts[\"email\"]){\n      contacts.push( {\"text\":\"email\", \"url\":\"mailto:\"+rawContacts[\"email\"], \"val\":rawContacts[\"email\"] } );\n    }\n    if(rawContacts[\"text\"]){\n      contacts.push( {\"text\":\"text\", \"url\":\"sms:\"+rawContacts[\"text\"], \"val\":rawContacts[\"text\"] } );\n    }\n    if(rawContacts[\"fax\"]){\n      contacts.push( {\"text\":\"fax\", \"url\":\"fax:\"+rawContacts[\"fax\"], \"val\":rawContacts[\"fax\"] } );\n    }\n    this._logToConsole(`${contacts.length.toString()} items found for 'contacts'.`);\n    return contacts;\n  }\n\n  /** use raw 'social' data to generate a list of basic profile links for easy display */\n  _prepareSocial(rawSocial){\n    if(Object.keys(rawSocial).length < 1){ return []; }\n    \n    let social = [];\n    if(rawSocial[\"twitter\"]){\n      social.push( {\"text\":\"twitter\", \"url\":\"http://twitter.com/\"+rawSocial[\"twitter\"]} );\n    }\n    if(rawSocial[\"facebook\"]){\n      social.push( {\"text\":\"facebook\", \"url\":\"http://facebook.com/\"+rawSocial[\"facebook\"]} );\n    }\n    if(rawSocial[\"instagram\"]){\n      social.push( {\"text\":\"instagram\", \"url\":\"https://instagram.com/\"+rawSocial[\"instagram\"]} );\n    }\n    if(rawSocial[\"flickr\"]){\n      social.push( {\"text\":\"flickr\", \"url\":\"https://www.flickr.com/photos/\"+rawSocial[\"flickr\"]} );\n    }\n    if(rawSocial[\"tumblr\"]){\n      social.push( {\"text\":\"tumblr\", \"url\":\"http://\"+rawSocial[\"tumblr\"]+\".tumblr.com/\"} );\n    }\n    this._logToConsole(`${social.length.toString()} items found for 'social'.`);\n    return social;\n  }\n\n  _logGAEvent(clickedContent){\n    sendGAEvent('bulib-locoso', clickedContent, this.library);\n  }\n  \n  _logToConsole(message){\n    if(this.debug){ console.log(\"bulib-locoso) \" + message); }\n  }\n\n}\n","import Locoso from './locoso';\n\nwindow.customElements.define(\"bulib-locoso\", Locoso);"],"names":["Locoso","myLocoso","getLibraryInfoFromCode","this","library","_logToConsole","JSON","stringify","socialDisplay","lib_name","address","website","raw_contacts","contacts","_prepareContacts","raw_social","social","_prepareSocial","include_libhours","length","html","map","s","text","_this","link_class","ev","_logGAEvent","url","l","encodeURI","c","val","rawContacts","Object","keys","push","toString","rawSocial","clickedContent","sendGAEvent","message","debug","console","log","type","String","notify","Boolean","LitElement","window","customElements","define"],"mappings":"o/FAWqBA,4IAebC,EAAWC,EAAuBC,KAAKC,UAAY,QAClDC,cAAc,wCAA0CC,KAAKC,UAAUN,QAexEO,EAbAC,EAAWR,EAAQ,MAAY,eAC/BS,EAAUT,EAAQ,SAAe,CAAC,0BAA0B,oBAC5DU,EAAUV,EAAQ,SAAe,mCAEjCW,EAAeX,EAAQ,UAAgB,OAAS,qBAAuB,kBAAoB,gBAC3FY,EAAWV,KAAKW,iBAAiBF,GAEjCG,EAAad,EAAQ,QAAc,GACnCe,EAASb,KAAKc,eAAeF,GAE7BG,EAA0Cf,KAAKC,SAA2B,QAAhBD,KAAKC,oBAC9DC,cAAc,aAAeI,EAAW,uBAAyBS,GAG/CV,EAApBQ,EAAOG,OAAS,EAAoBC,OAEtBA,MAGXJ,EAAOK,KAAI,SAACC,UACZF,MAAqBE,EAAEC,KAAgBC,EAAKC,YAAuB,SAACC,GAAQF,EAAKG,YAAYL,EAAEC,QAC3ED,EAAEM,IAAkCN,EAAEC,KAA6BC,EAAKC,WACVH,EAAEC,UAMnFH,MAmBGF,EACEE,MAAsDjB,KAAKsB,WAAwBtB,KAAKC,SACxFgB,OAIEX,EACJC,EAAQW,KAAI,SAACQ,UAAMT,MAAWS,MAGhBpB,EAA4BN,KAAKsB,YAAuB,SAACC,GAAQF,EAAKG,YAAY,aACpDhB,EACPR,KAAKsB,YAAuB,SAACC,GAAQF,EAAKG,YAAY,gBACvC,kCAAoCG,UAAU,qBAAuBrB,GASzHI,EAASQ,KAAI,SAACU,UAAMX,MACdW,EAAER,KAAkBC,EAAKC,WAAqBM,EAAEH,KAC3B,SAACF,GAAQF,EAAKG,YAAYI,EAAER,QAAYQ,EAAEC,QAIvExB,4CAOOyB,MACZC,OAAOC,KAAKF,GAAad,OAAS,QAAW,OAE5CN,EAAW,UACZoB,EAAW,OACZpB,EAASuB,KAAM,MAAQ,WAAc,OAAOH,EAAW,UAAiBA,EAAW,QAElFA,EAAW,OACZpB,EAASuB,KAAM,MAAQ,YAAe,UAAUH,EAAW,UAAiBA,EAAW,QAEtFA,EAAW,MACZpB,EAASuB,KAAM,MAAQ,WAAc,OAAOH,EAAW,SAAgBA,EAAW,OAEjFA,EAAW,KACZpB,EAASuB,KAAM,MAAQ,UAAa,OAAOH,EAAW,QAAeA,EAAW,WAE7E5B,wBAAiBQ,EAASM,OAAOkB,4CAC/BxB,yCAIMyB,MACVJ,OAAOC,KAAKG,GAAWnB,OAAS,QAAW,OAE1CH,EAAS,UACVsB,EAAS,SACVtB,EAAOoB,KAAM,MAAQ,cAAiB,sBAAsBE,EAAS,UAEpEA,EAAS,UACVtB,EAAOoB,KAAM,MAAQ,eAAkB,uBAAuBE,EAAS,WAEtEA,EAAS,WACVtB,EAAOoB,KAAM,MAAQ,gBAAmB,yBAAyBE,EAAS,YAEzEA,EAAS,QACVtB,EAAOoB,KAAM,MAAQ,aAAgB,iCAAiCE,EAAS,SAE9EA,EAAS,QACVtB,EAAOoB,KAAM,MAAQ,aAAgB,UAAUE,EAAS,OAAW,sBAEhEjC,wBAAiBW,EAAOG,OAAOkB,0CAC7BrB,sCAGGuB,GACVC,EAAY,eAAgBD,EAAgBpC,KAAKC,+CAGrCqC,GACTtC,KAAKuC,OAAQC,QAAQC,IAAI,iBAAmBH,8CAlJxC,CAELhB,WAAY,CAACoB,KAAMC,QAEnB1C,QAAS,CAACyC,KAAMC,OAAQC,QAAO,GAG/BL,MAAO,CAACG,KAAMG,iBAVgBC,GCTpCC,OAAOC,eAAeC,OAAO,eAAgBpD"}